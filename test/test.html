<!DOCTYPE html>

<html>
    
    <head>
        <meta charset="UTF-8" />
        <title>tmlib.js test</title>
        <script src="../src/tmlib.js"></script>
        
        <script src="../src/core/object.js"></script>
        <script src="../src/core/string.js"></script>
        <script src="../src/core/number.js"></script>
        <script src="../src/core/array.js"></script>
        <script src="../src/core/function.js"></script>
        <script src="../src/core/date.js"></script>
        <script src="../src/core/math.js"></script>
        
        <script src="../src/geom/vector2.js"></script>
        <script src="../src/geom/vector3.js"></script>
        <script src="../src/geom/matrix33.js"></script>
        <script src="../src/geom/matrix44.js"></script>
        
        <script src="../src/dom/element.js"></script>
        <script src="../src/dom/event.js"></script>
        
        <script src="../src/input/mouse.js"></script>
        <script src="../src/input/keyboard.js"></script>
        <script src="../src/input/touch.js"></script>
        
        <script src="../src/graphics/canvas.js"></script>
        <script src="../src/graphics/texture.js"></script>
        
        <script src="../src/sound/sound.js"></script>
        
        <script src="../src/app/element.js"></script>
        <script src="../src/app/canvaselement.js"></script>
        <script src="../src/app/sprite.js"></script>
        <script src="../src/app/label.js"></script>
        <script src="../src/app/scene.js"></script>
        <script src="../src/app/canvasapp.js"></script>
        <script src="../src/app/event.js"></script>
        <script src="../src/app/interactive.js"></script>
        
        <script src="http://dat-gui.googlecode.com/git/build/dat.gui.js"></script>
        <script src="https://raw.github.com/mrdoob/stats.js/master/src/Stats.js"></script>
        
        <script>
            
            tm.preload(function() {
                tm.graphics.TextureManager.add("human", "../resource/img/human.png");
            });
            
            tm.main(function() {
                var app = tm.app.CanvasApp("#world");
                app.enableStats();
                app.background = "black";
                
                var endScene = tm.app.EndScene();
                app.pushScene(endScene);
                
                var mainScene = tm.app.Scene();
                app.pushScene(mainScene);
                mainScene.update = function() {
                    if (app.frame > 300) {
                        app.popScene();
                    }
                    console.log("main exec");
                };
                
                
                var startScene = tm.app.StartScene();
                app.pushScene(startScene);
                
                app.run();
                
                // 
                var sprite = tm.app.Sprite(64, 64);
                sprite.position.set(150, 75);
                sprite.update = function(app) {
                    this.x = app.pointing.x;
                    this.y = app.pointing.y;
                };
                /*
                sprite.scaleX = 3;
                sprite.scaleY = 2;
                sprite.rotation = 80;
                */
                mainScene.addChild(sprite);
                sprite.canvas.fillStyle = "white";
                sprite.canvas.fillRect(0, 0, sprite.width, sprite.height);
                sprite.setImage( tm.graphics.TextureManager.get("human") );
            });
            
        </script>
    </head>
    
    <body>
        <h1>tmlib.js test</h1>
        <canvas id="world"></canvas>
    </body>
    
</html>
<!DOCTYPE html> 
<html lang="ja"> 
    <head> 
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Shape Test | TM Lib</title>
        
        <!-- prettify -->
        <link type="text/css" rel="stylesheet" href="../../plugins/prettify/prettify.css" />
        <script src="../../plugins/prettify/prettify.js"></script>
        
        <style>
            body { font-family: "Meiryo", "メイリオ", "ヒラギノ角ゴ Pro W3", sans-serif; }
            
            #content {
                display: -webkit-box;
                display: -moz-box;
                display: -o-box;
                display: box;
            }
            
            #content>* {
                padding: 10px 20px;
                width: 50%;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                -o-box-sizing: border-box;
                box-sizing: border-box;
            }
        </style>
        
        <script src="../../src/tmlib.js"></script>
        
        <script src="../../src/core/object.js"></script>
        <script src="../../src/core/string.js"></script>
        <script src="../../src/core/number.js"></script>
        <script src="../../src/core/array.js"></script>
        <script src="../../src/core/function.js"></script>
        <script src="../../src/core/date.js"></script>
        <script src="../../src/core/math.js"></script>
        
        <script src="../../src/geom/vector2.js"></script>
        <script src="../../src/geom/vector3.js"></script>
        <script src="../../src/geom/matrix33.js"></script>
        
        <script src="../../src/dom/element.js"></script>
        <script src="../../src/dom/style.js"></script>
        <script src="../../src/dom/event.js"></script>
        
        <script src="../../src/event/event.js"></script>
        <script src="../../src/event/eventdispatcher.js"></script>
        
        <script src="../../src/input/mouse.js"></script>
        <script src="../../src/input/keyboard.js"></script>
        <script src="../../src/input/touch.js"></script>
        <script src="../../src/input/accelerometer.js"></script>
        
        <script src="../../src/graphics/canvas.js"></script>
        <script src="../../src/graphics/gradient.js"></script>
        
        <script src="../../src/app/element.js"></script>
        <script src="../../src/app/canvaselement.js"></script>
        <script src="../../src/app/sprite.js"></script>
        <script src="../../src/app/shape.js"></script>
        <script src="../../src/app/scene.js"></script>
        <script src="../../src/app/canvasapp.js"></script>
        <script src="../../src/app/button.js"></script>
        <script src="../../src/app/label.js"></script>
        <script src="../../src/app/collision.js"></script>
        <script src="../../src/app/interaction.js"></script>
        <script src="../../src/app/animation.js"></script>
        <script src="../../src/app/userinterface.js"></script>
        
        <script src="../../src/anim/tween.js"></script>
        
        <script src="../../plugins/console.tm.js"></script>

        <script id="test-script">

/*
 * constant
 */
var SCREEN_WIDTH    = 465;
var SCREEN_HEIGHT   = 465;
var SCREEN_CENTER_X = SCREEN_WIDTH/2;
var SCREEN_CENTER_Y = SCREEN_HEIGHT/2;
            
            /*
             * Test
             */
            tm.main(function() {
                // キャンバスアプリケーション
                var app = tm.app.CanvasApp("#world");

                app.replaceScene(GaugeTestScene());

                app.run();
            });
            

            var TestScene01 = tm.createClass({
                superClass: tm.app.Scene,

                init: function() {
                    this.superInit();

                    var gauge0 = this.gauge0 = tm.app.Gauge(200, 20).setPosition(100, 50).addChildTo(this);
                    var gauge1 = tm.app.Gauge(200, 20, "green", "right").setPosition(300, 80).addChildTo(this);
                    var gauge2 = tm.app.Gauge(20, 200, "blue", "up").setPosition(20, 220).addChildTo(this);
                    var gauge3 = tm.app.Gauge(20, 200, "white", "down").setPosition(50, 20).addChildTo(this);

                    var updateGauge = function() {
                        this.percent += this.v;
                        if (this.isEmpty()) {
                            this.v = 1;
                        }
                        if (this.isFull()) {
                            this.v = -1;
                        }
                    }

                    gauge0.v = -1; gauge0.update = updateGauge;
                    gauge1.v = -1; gauge1.update = updateGauge;
                    gauge2.v = -1; gauge2.update = updateGauge;
                    gauge3.v = -1; gauge3.update = updateGauge;
                },

                update: function() {

                },

                onpointingstart: function() {
                }
            });

            var TestScene02 = tm.createClass({
                superClass: tm.app.Scene,

                init: function() {
                    this.superInit();

                    var gauge = tm.app.Gauge(200, 20, "red", "left").setPosition(100, 50).addChildTo(this);
                    gauge.v = 1;

//                    gauge.setValue(10);
//                    gauge.setRatio(0.5);
                    gauge.update = function() {
                        this.percent += this.v;
                        if (this.isEmpty()) {
                            this.v = 1;
                        }
                        if (this.isFull()) {
                            this.v = -1;
                        }
                    }
                },
            });
            var GaugeTestScene = tm.createClass({
    
    superClass: tm.app.Scene,
    
    init: function() {
        this.superInit();
        
        var gauge      = tm.app.Gauge(300, 25, "white", "left").addChildTo(this).setPosition(85, 100);
	    var upButton   = tm.app.GlossyButton(100, 50, "red", "up").addChildTo(this).setPosition(SCREEN_CENTER_X-50, 350);
	    var downButton = tm.app.GlossyButton(100, 50, "blue", "down").addChildTo(this).setPosition(SCREEN_CENTER_X+50, 350);
        
        upButton.onpointingstart = function() {
            gauge.value += 10;
        };
        downButton.onpointingstart = function() {
            gauge.value -= 10;
        };
    },
    
});
        </script>
        
        <script>
            tm.dom.Element(window).event.add("load", function() {
                tm.dom.Element("#code").text = tm.dom.Element("#test-script").text;
                prettyPrint();
            });
        </script>
        
    </head>
    
    <body>
         
        <h1>Shape Test | TM Lib</h1>
        
        <div id="content">
            <section>
                <h2>Canvas</h2>
                <canvas id="world" width="640" height="480"></canvas>
                <h2>Console</h2>
                <pre id="console" class="prettyprint"></pre>
            </section>
            <section>
                <h2>Code</h2>
                <pre id="code" class="prettyprint"></pre>
            </section>
        </div>
        
        
    </body>
</html>

<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*
 * list.js
 */

(function() {
    
<span id='tm-Item'>    /**
</span>     * @class tm.Item
     * Item クラス
     */
    tm.Item = tm.createClass({
<span id='tm-Item-property-prev'>        /** prev */
</span>        prev: null,
<span id='tm-Item-property-next'>        /** next */
</span>        next: null,
<span id='tm-Item-property-data'>        /** data */
</span>        data: null,
        
<span id='tm-Item-method-constructor'>        /**
</span>         * @constructor
         */
        init: function() {
        }
    });
<span id='tm-List'>    
</span>    /**
     * @class tm.List
     * List クラス
     * ### Reference
     * - &lt;http://java.sun.com/javase/ja/6/docs/ja/api/java/util/LinkedList.html&gt;
     * - &lt;http://www.javadrive.jp/start/linkedlist/&gt;
     * - &lt;http://www5c.biglobe.ne.jp/~ecb/cpp/07_08.html&gt;
     * - &lt;http://hextomino.tsukuba.ch/e30895.html&gt;
     * - &lt;http://www.nczonline.net/blog/2009/04/21/computer-science-in-javascript-doubly-linked-lists/&gt;
     * - &lt;http://www.nczonline.net/blog/2009/04/13/computer-science-in-javascript-linked-list/&gt;
     */
    tm.List = tm.createClass({
<span id='tm-List-method-constructor'>        
</span>        /**
         * @constructor
         */
        init: function() {
            this._length = 0;
            this._head = tm.Item();
            this._tail = tm.Item();
            
            this._head.next = this._tail;
            this._tail.prev = this._head;
        },
<span id='tm-List-method-add'>        
</span>        /**
         * 追加
         */
        add: function(data) {
            var item = tm.Item();
            item.data = data;
            
            item.prev = this._tail.prev;
            item.next = this._tail;
            
            this._tail.prev.next = item;
            this._tail.prev = item;
            
            ++this._length;
            
            return this;
        },
<span id='tm-List-method-remove'>        
</span>        /**
         * 削除
         */
        remove: function(index) {
            var current = this.getItem(index);
            
            current.prev.next = current.next;
            current.next.prev = current.prev;
            
            --this._length;
            
            return current;
<span id='tm-List-method-get'>        },
</span>        
        /**
         * ゲット
         */
        get: function(index) {
            return this.getItem(index).data;
<span id='tm-List-method-getItem'>        },
</span>        
        /**
         * アイテムを取得
         */
        getItem: function(index) {
            var current = this._head.next;
            var i=0;
            
            while (i++ &lt; index) {
                current = current.next;
            }
            
<span id='tm-List-method-forEach'>            return current;
</span>        },
        
        /**
         * 繰り返し
         */
        forEach: function(fn) {
<span id='tm-List-method-clear'>            // TODO:
</span>        },
        
        /**
         * クリア
         */
<span id='tm-List-method-clone'>        clear: function() {
</span>            // TODO:
        },
        
        /**
         * クローン
         */
<span id='tm-List-method-getFirst'>        clone: function() {
</span>            // TODO:
        },
        
        /**
         * 最初の要素を取得
         */
<span id='tm-List-method-getLast'>        getFirst: function() {
</span>            // TODO:
        },
        
        /**
<span id='tm-List-method-indexOf'>         * 最後の要素を取得
</span>         */
        getLast: function() {
            // TODO:
        },
        
        /**
<span id='tm-List-method-lastIndexOf'>         * 最初に一致した位置のインデックスを取得
</span>         */
        indexOf: function(obj) {
            // TODO:
        },
        
<span id='tm-List-method-toArray'>        /**
</span>         * 最後に一致した位置のインデックスを取得
         */
        lastIndexOf: function(obj) {
            // TODO:
        },
        
        /**
         * 配列に変換
         */
        toArray: function() {
            if (this._length &lt;= 0) return [];
            
            var current = this._head.next;
            var arr = [];
            
<span id='tm-List-method-toString'>            while (current.data != null) {
</span>                arr.push(current.data);
                current = current.next;
            }
            
            return arr;
        },
        
        /**
         * 文字列に変換
         */
        toString: function() {
            var arr = this.toArray();
            for (var i=0,len=arr.length; i&lt;len; ++i) {
                arr[i] = arr[i].toString();
            }
            
            return arr.join(',');
        },
    });
    
})();

</pre>
</body>
</html>
